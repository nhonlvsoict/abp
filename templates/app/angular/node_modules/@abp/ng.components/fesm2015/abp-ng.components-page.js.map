{"version":3,"file":"abp-ng.components-page.js","sources":["../../../packages/components/page/src/page-parts.component.ts","../../../packages/components/page/src/page.component.ts","../../../packages/components/page/src/page-part.directive.ts","../../../packages/components/page/src/page.module.ts","../../../packages/components/page/src/abp-ng.components-page.ts"],"sourcesContent":["import { Component, ViewEncapsulation } from '@angular/core';\n\nexport enum PageParts {\n  title = 'PageTitleContainerComponent',\n  breadcrumb = 'PageBreadcrumbContainerComponent',\n  toolbar = 'PageToolbarContainerComponent',\n}\n\n@Component({\n  selector: 'abp-page-title-container',\n  template: `\n    <ng-content></ng-content>\n  `,\n  encapsulation: ViewEncapsulation.None,\n})\nexport class PageTitleContainerComponent {}\n\n@Component({\n  selector: 'abp-page-breadcrumb-container',\n  template: `\n    <ng-content></ng-content>\n  `,\n  encapsulation: ViewEncapsulation.None,\n})\nexport class PageBreadcrumbContainerComponent {}\n\n@Component({\n  selector: 'abp-page-toolbar-container',\n  template: `\n    <ng-content></ng-content>\n  `,\n  encapsulation: ViewEncapsulation.None,\n})\nexport class PageToolbarContainerComponent {}\n","import { Component, Input, ViewEncapsulation, ContentChild } from '@angular/core';\nimport {\n  PageTitleContainerComponent,\n  PageBreadcrumbContainerComponent,\n  PageToolbarContainerComponent,\n  PageParts,\n} from './page-parts.component';\n\n@Component({\n  selector: 'abp-page',\n  templateUrl: './page.component.html',\n  encapsulation: ViewEncapsulation.None,\n})\nexport class PageComponent {\n  @Input() title: string;\n\n  toolbarVisible = false;\n  _toolbarData: any;\n  @Input('toolbar') set toolbarData(val: any) {\n    this._toolbarData = val;\n    this.toolbarVisible = true;\n  }\n\n  get toolbarData() {\n    return this._toolbarData;\n  }\n\n  @Input('breadcrumb') breadcrumbVisible = true;\n\n  pageParts = {\n    title: PageParts.title,\n    breadcrumb: PageParts.breadcrumb,\n    toolbar: PageParts.toolbar,\n  };\n\n  @ContentChild(PageTitleContainerComponent) customTitle: PageTitleContainerComponent;\n  @ContentChild(PageBreadcrumbContainerComponent)\n  customBreadcrumb: PageBreadcrumbContainerComponent;\n  @ContentChild(PageToolbarContainerComponent) customToolbar: PageToolbarContainerComponent;\n\n  get shouldRenderRow() {\n    return !!(\n      this.title ||\n      this.toolbarVisible ||\n      this.breadcrumbVisible ||\n      this.customTitle ||\n      this.customBreadcrumb ||\n      this.customToolbar\n    );\n  }\n}\n","import {\n  Directive,\n  TemplateRef,\n  ViewContainerRef,\n  Input,\n  InjectionToken,\n  Optional,\n  Inject,\n  OnInit,\n  OnDestroy,\n  Injector,\n  OnChanges,\n  SimpleChanges,\n  SimpleChange,\n} from '@angular/core';\nimport { Observable, Subscription, of } from 'rxjs';\n\nexport interface PageRenderStrategy {\n  shouldRender(type?: string): boolean | Observable<boolean>;\n  onInit?(type?: string, injector?: Injector, context?: any): void;\n  onDestroy?(type?: string, injector?: Injector, context?: any): void;\n  onContextUpdate?(change?: SimpleChange): void;\n}\n\nexport const PAGE_RENDER_STRATEGY = new InjectionToken<PageRenderStrategy>('PAGE_RENDER_STRATEGY');\n\n@Directive({ selector: '[abpPagePart]' })\nexport class PagePartDirective implements OnInit, OnDestroy, OnChanges {\n  hasRendered = false;\n  type: string;\n  subscription: Subscription;\n\n  @Input('abpPagePartContext') context: any;\n  @Input() set abpPagePart(type: string) {\n    this.type = type;\n    this.createRenderStream(type);\n  }\n\n  render = (shouldRender: boolean) => {\n    if (shouldRender && !this.hasRendered) {\n      this.viewContainer.createEmbeddedView(this.templateRef);\n      this.hasRendered = true;\n    } else if (!shouldRender && this.hasRendered) {\n      this.viewContainer.clear();\n      this.hasRendered = false;\n    }\n  };\n\n  constructor(\n    private templateRef: TemplateRef<any>,\n    private viewContainer: ViewContainerRef,\n    @Optional() @Inject(PAGE_RENDER_STRATEGY) private renderLogic: PageRenderStrategy,\n    private injector: Injector,\n  ) {}\n\n  ngOnChanges({ context }: SimpleChanges): void {\n    if (this.renderLogic?.onContextUpdate) {\n      this.renderLogic.onContextUpdate(context);\n    }\n  }\n\n  ngOnInit() {\n    if (this.renderLogic?.onInit) {\n      this.renderLogic.onInit(this.type, this.injector, this.context);\n    }\n  }\n\n  ngOnDestroy() {\n    this.clearSubscription();\n\n    if (this.renderLogic?.onDestroy) {\n      this.renderLogic.onDestroy(this.type, this.injector, this.context);\n    }\n  }\n\n  shouldRender(type: string) {\n    if (this.renderLogic) {\n      const willRender = this.renderLogic.shouldRender(type);\n      return willRender instanceof Observable ? willRender : of(willRender);\n    }\n    return of(true);\n  }\n\n  protected createRenderStream(type: string) {\n    this.clearSubscription();\n\n    this.subscription = this.shouldRender(type).subscribe(this.render);\n  }\n\n  protected clearSubscription() {\n    if (this.subscription) {\n      this.subscription.unsubscribe();\n    }\n  }\n}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { UiExtensionsModule } from '@abp/ng.theme.shared/extensions';\nimport { ThemeSharedModule } from '@abp/ng.theme.shared';\nimport { CoreModule } from '@abp/ng.core';\nimport { PageComponent } from './page.component';\nimport {\n  PageTitleContainerComponent,\n  PageBreadcrumbContainerComponent,\n  PageToolbarContainerComponent,\n} from './page-parts.component';\nimport { PagePartDirective } from './page-part.directive';\n\nconst exportedDeclarations = [\n  PageComponent,\n  PageTitleContainerComponent,\n  PageBreadcrumbContainerComponent,\n  PageToolbarContainerComponent,\n  PagePartDirective,\n];\n\n@NgModule({\n  declarations: [...exportedDeclarations],\n  imports: [CommonModule, UiExtensionsModule, CoreModule, ThemeSharedModule],\n  exports: [...exportedDeclarations],\n})\nexport class PageModule {}\n","/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './public-api';\n"],"names":[],"mappings":"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"}