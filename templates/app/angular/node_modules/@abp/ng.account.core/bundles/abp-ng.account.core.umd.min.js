!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@angular/core"),require("rxjs/operators"),require("@angular/router"),require("@abp/ng.core"),require("@abp/ng.theme.shared")):"function"==typeof define&&define.amd?define("@abp/ng.account.core",["exports","@angular/core","rxjs/operators","@angular/router","@abp/ng.core","@abp/ng.theme.shared"],t):t(((e="undefined"!=typeof globalThis?globalThis:e||self).abp=e.abp||{},e.abp.ng=e.abp.ng||{},e.abp.ng.account=e.abp.ng.account||{},e.abp.ng.account.core={}),e.ng.core,e.rxjs.operators,e.ng.router,e.ng_core,e.ng_theme_shared)}(this,(function(e,t,n,r,i,o){"use strict";var a=function(){function e(e,t,n){this.multiTenancy=e,this.configState=t,this.isMultiTenancyEnabled$=this.configState.getDeep$("multiTenancy.isEnabled"),this.tenantBoxKey="Account.TenantBoxComponent",this.route=n.get(r.ActivatedRoute)}return Object.defineProperty(e.prototype,"enableLocalLogin$",{get:function(){return this.configState.getSetting$("Abp.Account.EnableLocalLogin").pipe(n.map((function(e){return"false"!==(null==e?void 0:e.toLowerCase())})))},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isTenantBoxVisibleForCurrentRoute",{get:function(){var e;return null===(e=this.getMostInnerChild().data.tenantBoxVisible)||void 0===e||e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isTenantBoxVisible",{get:function(){return this.isTenantBoxVisibleForCurrentRoute&&this.multiTenancy.isTenantBoxVisible},enumerable:!1,configurable:!0}),e.prototype.getMostInnerChild=function(){for(var e=this.route.snapshot,t=0;e.firstChild&&t<10;)e=e.firstChild,t++;return e},e}();a.decorators=[{type:t.Injectable}],a.ctorParameters=function(){return[{type:i.MultiTenancyService},{type:i.ConfigStateService},{type:t.Injector}]};Object.create;Object.create;var s=function(){function e(e,t,n,r,i){this.toasterService=e,this.tenantService=t,this.sessionState=n,this.configState=r,this.appConfigService=i,this.currentTenant$=this.sessionState.getTenant$()}return e.prototype.onSwitch=function(){var e=this.sessionState.getTenant();this.name=null==e?void 0:e.name,this.isModalVisible=!0},e.prototype.save=function(){var e=this;if(!this.name)return this.setTenant(null),void(this.isModalVisible=!1);this.modalBusy=!0,this.tenantService.findTenantByName(this.name,{}).pipe(n.finalize((function(){return e.modalBusy=!1}))).subscribe((function(t){var n=t.success,r=t.tenantId,i=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}(t,["success","tenantId"]);n?(e.setTenant(Object.assign(Object.assign({},i),{id:r,isAvailable:!0})),e.isModalVisible=!1):e.showError()}))},e.prototype.setTenant=function(e){var t=this;this.sessionState.setTenant(e),this.appConfigService.get().subscribe((function(e){return t.configState.setState(e)}))},e.prototype.showError=function(){this.toasterService.error("AbpUiMultiTenancy::GivenTenantIsNotAvailable","AbpUi::Error",{messageLocalizationParams:[this.name]})},e}();s.decorators=[{type:t.Injectable}],s.ctorParameters=function(){return[{type:o.ToasterService},{type:i.AbpTenantService},{type:i.SessionStateService},{type:i.ConfigStateService},{type:i.AbpApplicationConfigurationService}]},e.AuthWrapperService=a,e.TenantBoxService=s,Object.defineProperty(e,"__esModule",{value:!0})}));
//# sourceMappingURL=abp-ng.account.core.umd.min.js.map